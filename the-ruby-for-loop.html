<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=endge, chrome=IE8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width, user-scalable=no" />
    <title> The Ruby For Loop </title>
    <link href='https://fonts.googleapis.com/css?family=Alice' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <!--[if lte IE 8]><script type="text/javascript" src="https://hackthology.com/theme/js/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" type="text/css" href="https://hackthology.com/theme/css/skeleton.css" />
    <link rel="stylesheet" type="text/css" href="https://hackthology.com/theme/css/theme.css" />
    <link rel="shortcut icon" type="image/png" href="https://hackthology.com/favicon.png" />
    <!--[if lte IE 8]><link rel="shortcut icon" type="image/x-icon" href="https://hackthology.com/favicon.ico" /><![endif]-->
    <link rel="alternate" type="application/atom+xml"
                           title="Hackthology — Flux Atom"
                           href="https://hackthology.com/" /> 
    <link rel ="alternate" type="application/rss+xml"
                           title="Hackthology — Flux RSS"
                           href="https://hackthology.com/feeds/rss.xml" /> 
    <meta name="keywords" content="" />
    <link rel="stylesheet" media="not print" type="text/css" href="https://hackthology.com/theme/css/pygments.css" /> 
  </head>
  <body>
    <div id="page">
      <header id="page-head">
        <h1>
          <a href="https://hackthology.com/index.html">Hackthology</a>
        </h1>
        <h3>
          The Discourses of Tim Henderson
        </h3>
        <div class="top-nav">
<ul>
    <li><a href="https://hackthology.com/articles.html">articles</a></li>
    <li><a href="https://hackthology.com/pages/about.html">about</a></li>
    <li><a href="https://hackthology.com/pages/publications.html">publications</a></li>
    <li><a href="https://hackthology.com/pages/projects.html">projects</a></li>
    <li><a href="https://hackthology.com/pages/teaching.html">teaching</a></li>
</ul>
<ul>
    <li><a href="https://hackthology.com/feeds/rss.xml">rss-feed</a></li>
    <li><a href="https://github.com/timtadh">github</a></li>
    <li><a href="https://twitter.com/timtadh">twitter</a></li>
    <li><a href="https://plus.google.com/109232399292705173597">google+</a></li>
    <li><a href="https://keybase.io/tadh">keybase</a></li>
</ul></div>
      </header>
      
      <div id="page-body">

        <article class="post" id="page-main" role="main">
      <header class="post-header">
        <h1 class="full">
          <a rel="bookmark"
             href="https://hackthology.com/the-ruby-for-loop.html"
             title="perm link The Ruby For Loop">
             The Ruby For Loop
          </a>
        </h1>
        <div class="meta">
<!-- includes/article_meta.html -->
          <div class="meta">
            by &nbsp;Tim Henderson
<br/> <time datetime="2013-11-21T00:00:00-05:00">Thu 21 November 2013</time></div>        </div>
      </header>
      <div class="post-content"> 
        <p>I am taking some time to learn Ruby this fall from <a href="http://www.worldcat.org/title/eloquent-ruby/oclc/676726142">Eloquent
Ruby</a>. The second chapter
on choosing the right control structures has this paragraph (emphasis mine):</p>
<blockquote>
<p>Since the two versions of the “print my fonts” code are essentially
equivalent,[1] why prefer one over the other? Mainly it is a question of
eliminating one level of indirection. Ruby actually defines the for loop in
terms of the each method: When you say for font in fonts, Ruby will actually
conjure up a call to fonts.each. Given that the for statement is really a call
to each in disguise, <strong>why not just pull the mask off and write what you
mean?</strong></p>
<blockquote>
<p>[1] Almost. The code block in the each version actually introduces a new
scope. Any variables introduced into a code block are local to that block
and go away at the end of the block. The more traditional for version of the
loop does not introduce a new scope, so that variables introduced inside a
for are also visible outside the loop.</p>
</blockquote>
</blockquote>
<h2>Why not just pull the mask off?</h2>
<p>We should not avoid constructs that potentially clarify the meaning of our code
because under the hood they become something else. By that argument one would
always write x86 machine code, memnonic assemblers are not for <em>real</em>
programmers! Real programmers assemble the code in their heads!</p>
<p>I think that a for-each loop of the style of Ruby or Python or <code>____</code> are a very
clear idiom. It reads nicely, every programmer who has a background in a C
family language will know instantly what you mean. I don't see any benefit in
avoiding the for loop in Ruby any more than I can see benefit in avoiding in C
when I could be using a goto and an if statement. Which reads better to you?
(Say the words out loud!)</p>
<div class="highlight"><pre><span></span><span class="n">fonts</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">font</span><span class="o">|</span>
<span class="c1"># fonts each do font :-(</span>
</pre></div>


<p>or</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">font</span> <span class="k">in</span> <span class="n">fonts</span>
<span class="c1"># for font in fonts :-)</span>
</pre></div>


<p>The for loop gets my vote.</p>
      </div>
      </article> <!-- /#page-main -->

      </div>  <!-- /#page-body -->

      <footer id="page-foot">
        <div class="bottom-nav">
<ul>
    <li><a href="https://hackthology.com/articles.html">articles</a></li>
    <li><a href="https://hackthology.com/pages/about.html">about</a></li>
    <li><a href="https://hackthology.com/pages/publications.html">publications</a></li>
    <li><a href="https://hackthology.com/pages/projects.html">projects</a></li>
    <li><a href="https://hackthology.com/pages/teaching.html">teaching</a></li>
</ul>
<ul>
    <li><a href="https://hackthology.com/feeds/rss.xml">rss-feed</a></li>
    <li><a href="https://github.com/timtadh">github</a></li>
    <li><a href="https://twitter.com/timtadh">twitter</a></li>
    <li><a href="https://plus.google.com/109232399292705173597">google+</a></li>
    <li><a href="https://keybase.io/tadh">keybase</a></li>
</ul></div>
        <p>Copyright 2016 Tim Henderson. All Rights Reserved.</p>
      </footer>
    </div> <!-- /#page -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-20145944-2']);
          _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); 
        ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>